%-------------------------------------------------------------
%               FR CYBERDEF SECOPS COURSE
%                                  EDX PACKAGES
%.    Commons COMMANDS for BOOK, NOTES (.doc) 
%                            and BEAMER (.prz)
%                              2020 eduf@ction
%-------------------------------------------------------------

\newcommand\UKword[1]{\emph{#1}}
\newcommand\textUK[1]{\textit{\textbf{#1}}}
\newcommand\Ucenter[1]{\begin{center}{#1}\end{center}}

\newcommand\head[1]{\textbf{#1}}
\newcommand\tb[1]{\textbf{#1}}
\newcommand{\g}[1]{\og #1 \fg{}}
\newcommand{\uload}[1] {\input{../Tex/#1}}
\newcommand{\ucurcolor}{black}

\newcommand{\mak}[1]{\faicon{\aArrowCircleORight} #1}


%-----------------------------------------------------
%										 	\INFOGitHub 
%---------------------------------------------------

\newcommand{\safeqrcode}[2][]{%
\qrcode[#1]{\detokenize{#2}} }
\newcommand{\GITfilename}{https://github.com/edufaction/CYBERDEF/raw/master/Builder/\jobname.pdf}

\newcommand{\INFOGitHub}
{
\begin{center} 
\setstretch{2}
 {Vérifiez la disponibilité d'une version plus récente de} \\
 {\link{\GITfilename}{\textbf{\jobname.pdf }sur GITHUB CYBERDEF} }   \\ 
{{\huge\ccbyncndeu}}  \\  
{2020 eduf@ction Publication en Creative Common BY-NC-ND }    \\  % Copyright notice
{\safeqrcode[padding]{\GITfilename}}  
\end{center} 
}



%-----------------------------------------------------
%										 	\upspicture 
%---------------------------------------------------
\newcommand{\upspicture}[3]
{
\renewcommand{\ucurcolor}{#3}
\resizebox{#2\textwidth}{!}{\input{#1}}
}


%-----------------------------------------------------
%										 	\uindex 
%---------------------------------------------------


\newcommand{\uindex}[1]
{
#1\index{#1}
}

%-----------------------------------------------------
%										 	\includer 
%---------------------------------------------------

\newcommand{\includer}[1]
{
\input{../Tex/Chapters/#1}
}

%-----------------------------------------------------
%										 	\edxdico 
%---------------------------------------------------

\newcommand{\edxdico}[2] {\textbf{#1} :\textit{ #2} \index{#1}}

%-----------------------------------------------------
%  command DEF : InTextx
%-----------------------------------------------------
\newcommand\InTexta{no text}
\newcommand\InTextb{no text}
\newcommand\InTextc{no text}
\newcommand\rnc{\renewcommand}


%-----------------------------------------------------
%										 	ENV warningbox
%---------------------------------------------------

\newtcolorbox{warningbox}[2][]
{
  colframe = ocre!25,
  colback  = black!05,
  coltitle = ocre!20!black,
  fonttitle = \bfseries, 
  title    = #2,
  #1,
}


\newtcolorbox{techworkbox}[2][]
{
sharp corners, 
  colframe = ocre!25,
  colback  = black!05,
  coltitle = ocre!20!black,
  fonttitle = \bfseries, 
  title    =  {\textcolor{ocre}{\faFile~\small {Fiche TECHNO}}} : #2,
  #1,
}




\newtcolorbox{notebox2}[2][]
{
sharp corners, 
colback = ocre!5!white, 
colframe = ocre!75!black,
fonttitle = \bfseries, 
colbacktitle= ocre!85!black,
title=#2,#1
}

\newtcolorbox{notebox}[2][]{colback=ocre!5!white,
colframe=ocre!75!black,fonttitle=\bfseries,
colbacktitle=ocre!85!black,enhanced,
attach boxed title to top right={yshift=+1mm},
title=#2,#1}


\newtcolorbox{toolsboxin}[2][]{sharp corners, colback=ocre!0!white,
colframe= black!25,fonttitle=\bfseries,
colbacktitle=black!60,enhanced,
attach boxed title to top left={yshift=+1mm},
title=#2,#1}


\newtcolorbox{techworkin}[2][]{sharp corners, colback=ocre!5!white,
colframe= ocre!100, fonttitle=\bfseries,
colbacktitle=black!5, enhanced,
 coltitle=black!50,
attach boxed title to top right ={yshift=+1mm},
title=#2,#1}



%-----------------------------------------------------
%										 	ENV ToolsBox
%---------------------------------------------------


\newcommand\toolseditor{No EDITOR in Datas.tex}
\newcommand\toolsurl{No URL INSERTED in Datas.tex}
\renewcommand\toolclass{No EDITOR in Datas.tex}
\renewcommand\toolname{No NAME in Datas.tex}
\renewcommand\toolanalyst{No EDITOR in Datas.tex}

\newcommand{\toolsbox}[2]
{
\input{../SecTools/#2.#1/datas.tex} 
\begin{toolsboxin}[sidebyside,righthand width=.7\textwidth]{#1}
\includegraphics[width=0.8\textwidth]{../SecTools/#2.#1/icon.png} \\
\tcblower
\input{../SecTools/#2.#1/description.tex}
\end{toolsboxin}
\noindent \small {\faCogs~Classe : \uppercase{\textbf{#2}}, Site de référence : \link{\toolsurl}{#1}} \\
\small {\faGlobe~Editeur : \textbf{\toolseditor}}
\small {\faGlobe~\toolsurl}
\small {\faEye~\toolsurl}
}

%\renewcommand\toolsclass{SIEM}
%\renewcommand\toolsname{RSA Netwitness}
%\renewcommand\toolseditor{RSA}
%\renewcommand\toolsurl{https://www.rsa.com/fr-fr/products/threat-detection-response}

%-----------------------------------------------------
%										 	ENV  TechWork
%---------------------------------------------------


\newcommand{\techwork}[2]
{
\begin{techworkin} [righthand width=.8\textwidth]{\faCogs~\small {Fiche TECHNO} : #1}#2
\end{techworkin}
}

%-----------------------------------------------------
%										 	\uchap
%---------------------------------------------------
\ifdefined\INTERTITLE
\newcommand{\uchap}[1]
	{
	\begin{LARGE}
	\textbf{\Ucenter{#1 \\ -oOo-}}	
	\end{LARGE}
	}
\else
	\newcommand{\uchap}[1]{}
\fi

%-----------------------------------------------------
%											\uexpand
%---------------------------------------------------
\newcommand {\uexpand}[1]{
\mode<all>\input{../Tex/Chapters/#1}
}

%-----------------------------------------------------
%											\upicture 
%---------------------------------------------------


\ifdefined\PRZMODE

\newcommand{\upicture}[4]{
\framesubtitle{#2}
%\begin{figure}[!h] %h
  \begin{center}
	 \includegraphics[height=0.95\textheight, width=0.95\textwidth, keepaspectratio ]{#1.pdf}
  \end{center}
%  \end{figure}
}

\else


\newcommand{\upicture}[4]{
\begin{figure}[!h] %h
  \begin{center}
	 \includegraphics[width=#3\textwidth]{#1.pdf}
  \end{center}
\caption{#2 \label{#4}}
\end{figure}
}
	
\fi

%\newcommand{\upicture}[4]{\ulpicture{#1.pdf}{#2}{#3}{#4}}



\ifdefined\PRZMODE

\newcommand{\uwpicture}[4]{
\framesubtitle{#2}
%\begin{figure}[!h] %h
  \begin{center}
	 \includegraphics[height=0.95\textheight, width=0.95\textwidth, keepaspectratio ]{#1.pdf}
  \end{center}
%  \end{figure}
}
\else
\newcommand{\uwpicture}[4]
{
\begin{wrapfigure}{O}{#3\textwidth} % inside / Outside
  \begin{center}
	 \includegraphics[width=#3\textwidth]{#1.pdf}
\end{center}
\caption{#2 \label{#4}}
\end{wrapfigure}
}
\fi


\ifdefined\PRZMODE

\newcommand{\picframe}[4]
{
\begin{frame}
\frametitle<presentation>{#2}
  \begin{center}
	 \includegraphics[height=0.95\textheight, width=0.95\textwidth, keepaspectratio ]{#1.pdf}
  \end{center}
\end{frame}

}
\else
\newcommand{\picframe}[4]
{
\begin{figure}[!hbtp] % !hbtp ou !h 
\centering \includegraphics[width=#3\textwidth]{#1.pdf}
\caption{#2 \label{#4}}
\end{figure}
}
\fi

%{figure}[!h]
%{wrapfigure}{O}{#3\textwidth}
%-----------------------------------------------------
%	FRAME										\wpicframe 
%---------------------------------------------------

\ifdefined\PRZMODE

\newcommand{\wpicframe}[4]
{
\begin{frame}
\frametitle<presentation>{#2}
  \begin{center}
	 \includegraphics[height=0.95\textheight, width=0.95\textwidth, keepaspectratio ]{#1.pdf}
  \end{center}
\end{frame}

}
\else
\newcommand{\wpicframe}[4]
{
\begin{wrapfigure}{O}{#3\textwidth}
\centering \includegraphics[width=#3\textwidth]{#1.pdf}
\caption{#2 \label{#4}}
\end{wrapfigure}
}
\fi

%-----------------------------------------------------
%	FRAME										\texframe 
%---------------------------------------------------
\ifdefined\PRZMODE

\newcommand{\texframe}[3]
{
\begin{frame}
\frametitle<presentation>{#1}
\framesubtitle<presentation>{#2}
#3
\end{frame}
}
\else
\newcommand{\texframe}[3]
{
#3
}

\fi

%-----------------------------------------------------
%											\uref 
%---------------------------------------------------
\newcommand{\uref}[2]{(Voir~#1~\cref{#2} page~\pageref{#2})}


%-----------------------------------------------------
%											\ubg
%---------------------------------------------------
\newcommand{\ubg}[1]{
\textbf{\g{\uppercase{#1}}}
}
%-----------------------------------------------------
%											\updfimage 
%---------------------------------------------------

\newcommand{\updfimage}[3]
{
\begin{wrapfigure}{R}{#3\textwidth}
  \begin{center}
	 \resizebox{#3\textwidth}{!}{\includegraphics{#1.pdf}}
  \end{center}
\caption{#2}
\end{wrapfigure}
}



%************************PACKAGE***

%\usepackage{tikz}% Required for drawing custom shapes
\usetikzlibrary{shadows}


%-----------------------------------------------------
%											 		\rem 
% insertion d'une remarque avec R
%---------------------------------------------------
\newcommand\rem[1]{%
   \marginpar{%
   \tikzpicture[baseline={(title.base)}]
      \node[inner sep=5pt,text width=4cm,drop shadow={shadow yshift=-5pt,shadow xshift=5pt,ocre},fill=white] (box) {\vskip5pt \nointerlineskip #1};
      \node[right=10pt,inner sep=0pt,outer sep=10pt] (title) at (box.north west) {\bfseries\color{ocre}Remarque};
      \draw[draw=ocre,very thick](title.west)--(box.north west)--(box.south west)--(box.south east)--(box.north east)--(title.east);
      \fill[ocre]([yshift=-10pt]box.north west)--+(-5pt,-5pt)--+(0pt,-10pt);
   \endtikzpicture}%
}
%-----------------------------------------------------
%											 \utikzimage 
% insertion d'une image sur fichier tkz.tex
%---------------------------------------------------

\newcommand{\utikzimage}[3]
{
\begin{wrapfigure}{R}{#3\textwidth}
  \begin{center}
	 \resizebox{#3\textwidth}{!}{\input{#1.tkz.tex}}
  \end{center}
\caption{#2}
\end{wrapfigure}
}

%-----------------------------------------------------
%														\link 
% Url et footnote du lien
%-----------------------------------------------------
  
%  \newcommand{\link}[2]
%  {
%  \href{#1}
%  {
%  #2~\raisebox{-0.2ex}{\footnote
%  	{
% #1
%  	}
%  }
%  }
%  }
  
  
  \newcommand{\link}[2]
  {\href{#1}
  {#2~\raisebox{-0.2ex}{\faExternalLink}\footnote{\url{#1}}}
  }
  

  %-----------------------------------------------------
%														\Pframe 
% Beamer Frame
%-----------------------------------------------------




%\newenvironment{Pframe}[1]{\mode<all>{\begin{frame}<presentation>\frametitle{#1}}{\end{frame}}}
%
%\newenvironment{Tframe}[1]{{\begin{frame}<presentation>\frametitle{#1}}{\end{frame}}
%
%
%\newenvironment{Aframe}{\begin{frame}}{\end{frame}}
%

%\newcommand{\Aframetitle}[1]
%{
%\mode<presentation>{\frametittle{#1}}
%}
%












